# tg-listener Test Configuration
# This configuration file demonstrates all features of the tgwrapper library

bot:
    token: "${BOT_TOKEN}" # Set via environment variable
    commands:
        - command: menu
          description: "ğŸ“± Show main menu"
        - command: help
          description: "â“ Show help information"
        - command: test
          description: "ğŸ§ª Quick test"
    delete_commands_on_exit: true
    debug: true

main_menu_id: "main"

menus:
    main:
        id: main
        text: |
            ğŸ  *Main Menu*

            Welcome to tgwrapper test Bot!
            Please select a feature to test:
        buttons:
            - - text: "ğŸ“‚ Multi-level Menu"
                menu_id: level_2
              - text: "ğŸ”— Link Buttons"
                menu_id: links
            - - text: "ğŸ“ Text Input Test"
                flow_id: text_input
              - text: "ğŸŒ API Call Test"
                flow_id: api_test
            - - text: "ğŸ¯ Dynamic Buttons"
                flow_id: dynamic_buttons
            - - text: "ğŸ“– GitHub"
                url: "https://github.com/mymmrac/telego"

    level_2:
        id: level_2
        text: |
            ğŸ“‚ *Level 2 Menu*

            Current location: Main Menu > Level 2
        buttons:
            - - text: "ğŸ“ Enter Level 3-A"
                menu_id: level_3_a
              - text: "ğŸ“ Enter Level 3-B"
                menu_id: level_3_b
            - - text: "â¬…ï¸ Back to Main Menu"
                callback: main_menu

    level_3_a:
        id: level_3_a
        text: |
            ğŸ“ *Level 3 Menu A*

            Current location: Main Menu > Level 2 > Level 3-A
        buttons:
            - - text: "ğŸ“„ Enter Level 4"
                menu_id: level_4
            - - text: "â¬…ï¸ Back to Level 2"
                menu_id: level_2
              - text: "ğŸ  Main Menu"
                callback: main_menu

    level_3_b:
        id: level_3_b
        text: |
            ğŸ“ *Level 3 Menu B*

            Current location: Main Menu > Level 2 > Level 3-B
        buttons:
            - - text: "â„¹ï¸ Show Info"
                callback: show_info
            - - text: "â¬…ï¸ Back to Level 2"
                menu_id: level_2
              - text: "ğŸ  Main Menu"
                callback: main_menu

    level_4:
        id: level_4
        text: |
            ğŸ“„ *Level 4 Menu*

            ğŸ‰ Congratulations! You have reached Level 4!

            Current location: Main Menu > Level 2 > Level 3-A > Level 4
        buttons:
            - - text: "ğŸ”„ Execute Action"
                callback: level_4_action
            - - text: "â¬…ï¸ Back to Level 3"
                menu_id: level_3_a
              - text: "ğŸ  Main Menu"
                callback: main_menu

    links:
        id: links
        text: |
            ğŸ”— *Link Button Test*

            Click the link buttons below to open in browser:
        buttons:
            - - text: "ğŸ™ GitHub"
                url: "https://github.com"
              - text: "ğŸ“˜ Telegram"
                url: "https://telegram.org"
            - - text: "ğŸ” Google"
                url: "https://www.google.com"
              - text: "ğŸ“° Hacker News"
                url: "https://news.ycombinator.com"
            - - text: "â¬…ï¸ Back to Main Menu"
                callback: main_menu

flows:
    text_input:
        id: text_input
        name: "Text Input Test"
        initial_step: input_name
        steps:
            input_name:
                id: input_name
                prompt_text: |
                    ğŸ“ *Text Input Test*

                    Please enter your name:
                keyboard:
                    add_back: true
                input_type: text
                store_as: userName
                next_step: input_message

            input_message:
                id: input_message
                prompt_text: |
                    ğŸ“ *Text Input Test*

                    Nice to meet you!

                    Please enter a message:
                keyboard:
                    add_back: true
                input_type: text
                store_as: userMessage
                next_step: select_action

            select_action:
                id: select_action
                prompt_text: |
                    ğŸ“ *Text Input Test*

                    Please select next action:
                keyboard:
                    type: static
                    buttons:
                        - - text: "ğŸ“¤ Show Input"
                            callback: "action:show"
                          - text: "ğŸ”„ Re-enter"
                            callback: "action:restart"
                    add_back: true
                    add_main: true
                input_type: callback
                store_as: selectedAction
                on_complete: handleTextInputAction

    api_test:
        id: api_test
        name: "API Call Test"
        initial_step: select_api
        steps:
            select_api:
                id: select_api
                prompt_text: |
                    ğŸŒ *API Call Test*

                    Select an API to call:

                    âš ï¸ These are real API calls
                keyboard:
                    type: static
                    buttons:
                        - - text: "ğŸ± Random Cat"
                            callback: "api:cat"
                          - text: "ğŸ• Random Dog"
                            callback: "api:dog"
                        - - text: "ğŸ˜‚ Random Joke"
                            callback: "api:joke"
                          - text: "ğŸ“Š Crypto Prices"
                            callback: "api:crypto"
                    add_back: true
                    add_main: true
                input_type: callback
                store_as: selectedAPI
                on_complete: executeAPICall

    dynamic_buttons:
        id: dynamic_buttons
        name: "Dynamic Button Test"
        initial_step: select_crypto
        steps:
            select_crypto:
                id: select_crypto
                prompt_text: |
                    ğŸ¯ *Dynamic Button Test*

                    The following button data comes from real API:
                    (Real-time cryptocurrency prices)
                keyboard:
                    type: dynamic
                    provider: getCryptoPrices
                    columns: 2
                    add_back: true
                    add_main: true
                    callback_prefix: "crypto:"
                input_type: callback
                store_as: selectedCrypto
                on_complete: showCryptoDetail

environment:
    is_test: true
    version: "1.0.0"
